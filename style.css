/* --- [Global Reset & Base Styles] --- */
* { box-sizing: border-box; }
body {
    font-family: 'Poppins', 'Mitr', sans-serif;
    background-color: #f0f2f5;
    color: #34495e;
    margin: 0;
    padding: 0;
    /* ห้ามให้เนื้อหา Scroll ออกไปนอกกรอบ */
    overflow: hidden; 
    line-height: 1.6;
    font-size: 16px;
    /* ใช้ Flexbox จัดกึ่งกลางกรอบมือถือบนหน้าจอใหญ่ */
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}

:root {
    --primary-color: #3498db;
    --secondary-color: #2ecc71;
    --accent-color: #e74c3c;
    --warning-color: #f1c40f;
    --text-color-dark: #2c3e50;
    --background-light: #ffffff;
    --background-dark: #f9fbfd;
    --border-color-light: #e6e9ed;
    --box-shadow-light: 0 4px 15px rgba(0, 0, 0, 0.08);
    --box-shadow-hover: 0 8px 25px rgba(0, 0, 0, 0.15);
    --golden-accent: #b8860b;
}

/* --- [App Container: การจำลองมุมมองโทรศัพท์ 9:16] --- */
#app-container {
    width: 390px; /* ความกว้างมาตรฐานของโทรศัพท์ (ประมาณ 360px - 414px) */
    height: 844px; /* อัตราส่วน 9:16 (390 * 2.16) */
    max-width: 100%;
    max-height: 100vh;
    overflow-y: auto; /* อนุญาตให้ Scroll ได้เฉพาะภายใน App Container */
    background-color: var(--background-light);
    box-shadow: 0 0 50px rgba(0, 0, 0, 0.25); /* เงาหนาเหมือนโทรศัพท์จริง */
    border-radius: 30px; /* มุมโค้งมนของโทรศัพท์ */
    position: relative;
}

/* --- [Loading Overlay (อยู่ในกรอบ App)] --- */
#loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    /* ใช้ 100% ของ parent container (#app-container) */
    width: 100%; 
    height: 100%;
    background-color: var(--background-light);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 99999;
    transition: opacity 0.5s ease-out;
}
.loader { /* ... Styles remain the same ... */ }

/* --- [Header (ปรับให้เหมาะกับ Mobile Nav)] --- */
.game-header {
    background-color: var(--background-light);
    padding: 15px 15px; /* ลด Padding */
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    border-bottom: 1px solid var(--border-color-light);
    position: sticky;
    top: 0;
    z-index: 1000;
}
.header-left { flex-grow: 1; }
.header-right { margin-left: 10px; }

.avatar-display {
    width: 40px; height: 40px; /* ลดขนาดอวาตาร์ */
    margin-right: 10px;
}

.user-info h3 { font-size: 1em; }
.level-bar { width: 120px; font-size: 0.75em; padding: 3px 8px; }

.game-nav {
    display: flex;
    justify-content: space-around;
    /* ซ่อนข้อความ เหลือแค่ Icon เพื่อประหยัดพื้นที่บน Mobile */
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 10px 0;
    background-color: var(--background-light);
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
    z-index: 100;
}
.game-nav a {
    margin: 0;
    font-size: 1.2em;
    color: #7f8c8d;
    padding: 0;
}
.game-nav a i { margin-right: 0; }
.game-nav a::after { display: none; } /* ซ่อนเส้นใต้ */
.game-nav a:hover { color: var(--primary-color); }


/* --- [Main Content Layout] --- */
.game-world { 
    padding: 15px; /* ลด Padding */
    max-width: 100%; 
    margin: 0;
    padding-bottom: 70px; /* เผื่อพื้นที่ให้ Navigation Bar ด้านล่าง */
}

.section-panel {
    margin-bottom: 15px; /* ลด Margin */
    padding: 15px;
    border-radius: 10px;
}
h2 {
    font-size: 1.5em; /* ลดขนาดหัวข้อ */
    padding-bottom: 10px;
}

/* --- [Shop Cards (ปรับให้เป็น Mobile List)] --- */
.shop-grid {
    grid-template-columns: 1fr; /* ให้เป็นแถวเดียวในแนวตั้ง (Mobile View) */
    gap: 15px;
}
.shop-card {
    flex-direction: row; /* จัดเรียงภาพและเนื้อหาแนวนอน */
    align-items: center;
    padding: 10px;
}
.shop-image-placeholder {
    width: 100px; /* กำหนดขนาดภาพที่ชัดเจน */
    height: 80px;
    min-width: 100px;
    border-radius: 8px;
    margin-right: 15px;
    border-bottom: none;
}
.shop-content { 
    padding: 0; 
    text-align: left;
}
.shop-content h3 { font-size: 1.1em; }
.status-bar { margin: 5px 0; padding: 4px 8px; font-size: 0.8em; }
.shop-card button {
    padding: 8px 12px;
    font-size: 0.9em;
    box-shadow: 0 3px #236a99;
    align-self: flex-end;
}
.shop-card button i { margin-right: 5px; }


/* --- [Ranking Panel (จัดให้เป็นแนวตั้ง)] --- */
.ranking-container { flex-direction: column; gap: 15px; }

/* --- [Park & Chat (ปรับปรุงให้เหมาะสมกับ 9:16)] --- */
.park-area {
    flex-direction: column; 
    min-height: 350px; 
    gap: 15px;
    padding: 15px;
}
#community-chat { width: 100%; height: 250px; }
#review-preview { width: 100%; }

/* --- [Footer] --- */
.game-footer {
    padding: 15px;
    font-size: 0.75em;
    margin-top: 15px;
}

/* --- [Modal (ปรับให้เต็มจอ App Container)] --- */
.modal {
    position: absolute; /* ใช้ absolute แทน fixed เพื่อให้อยู่ในกรอบ App Container */
    /* ... (Styles remain mostly the same for general modals) ... */
}
.modal-content {
    margin: 15% auto; 
    padding: 25px; 
    border-radius: 15px; 
    width: 90%; 
    max-width: 90%; 
}
.full-screen-modal {
    background-color: var(--background-light);
    width: 100%;
    height: 100%;
}
.full-screen-content {
    height: 100%;
    padding: 15px;
}

.all-reviews-grid {
    grid-template-columns: 1fr; /* ให้เป็นแถวเดียวในแนวตั้ง */
}

.post-review-button {
    position: absolute; /* ปรับให้ตำแหน่งแน่นอนภายใน App Container */
    bottom: 80px; /* เหนือ Navigation Bar */
    right: 15px;
}

/* --- [Avatar Modal Additions: Naming] --- */
.naming-section {
    margin-bottom: 20px;
    text-align: left;
}
.naming-section label {
    display: block;
    font-weight: 600;
    margin-bottom: 5px;
    color: var(--primary-color);
}
.naming-section input {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--border-color-light);
    border-radius: 8px;
    font-size: 1em;
}

/* --- [Media Query For Large Screens (Desktop Fallback)] --- */
/* ถ้าจอใหญ่มากๆ ให้ขยาย App Container ออกไปเพื่อแสดงผลได้เต็มจอ Desktop */
@media (min-width: 1200px) {
    #app-container {
        width: 390px;
        height: 844px;
    }
}
/* แก้ไขความขัดแย้งของ Mobile-first Grid */
.shop-card button {
    /* ปรับให้แสดงผลเป็นแถวใน Mobile */
    margin-top: 0;
}
